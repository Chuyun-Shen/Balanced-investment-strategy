# 智能投资再平衡助手

这是一个帮助普通投资者实现**投资组合自动再平衡**的工具，让您像专业投资经理一样管理自己的资产配置。无需复杂的金融知识，只需设置好目标配置，系统会自动为您生成每周的交易计划。

## 这个工具解决什么问题？

大多数投资者面临三大难题：
1. **情绪干扰**：市场波动时容易冲动交易
2. **执行不力**：知道应该买什么，但总是拖延或犹豫不决
3. **资金管理**：不知道该投入多少钱、何时投入最合适

本工具通过**系统化、纪律化的方法**解决这些问题，帮助您：
- 按照预设计划稳步建仓，避免一次性投入过多
- 在市场低迷时自动增加买入力度，高估时减少买入
- 保持投资组合的目标配置比例，不偏离长期规划

## 推荐资产配置方案

本工具内置了一套经过优化的资产配置方案，适合大多数中等风险承受能力的投资者：

### 四大类资产配置

| 资产类别 | 配置比例 | 作用 |
|---------|---------|------|
| 防守资产 | 35% | 提供稳定性，降低组合波动 |
| 核心权益 | 40% | 提供长期增长动力 |
| 海外权益 | 15% | 分散风险，提供全球化收益 |
| 商品+替代 | 10% | 对冲通胀，增加多元化 |

### 具体标的配置明细

```
# 防守资产 35%
"161119": 0.25,  # 易方达中债新综合债券指数LOF（人民币债，久期基石）
"007360": 0.10,  # 易方达中短期美元债(QDII)A（短久期IG，低波票息）

# 核心权益 40%
"510300": 0.15,  # 沪深300（核心宽基，性价比、流动性）
"009051": 0.15,  # 中证红利ETF/联接（股息/质量，回撤缓冲）
"510500": 0.06,  # 中证500（中盘补充）
"001917": 0.04,  # 招商量化精选A（阿尔法补充）

# 海外权益 15%
"513500": 0.10,  # 标普500ETF（核心海外敞口）
"513100": 0.02,  # 纳指100ETF（成长卫星，估值克制）
"513800": 0.03,  # 日本东证ETF（治理红利，降权）

# 商品+替代 10%
"518880": 0.06,  # 黄金ETF（通胀与极端尾部对冲）
"588000": 0.02,  # 科创50（本土成长卫星，谨慎）
"164824": 0.02,  # 工银印度LOF（新兴市场卫星，降权）
```

这套配置方案具有以下特点：
- **均衡风险**：股债比例约为65:35，适合中等风险承受能力
- **多元分散**：覆盖国内外多个市场，降低单一市场风险
- **质量优先**：侧重高股息、高质量的资产，注重长期稳健回报
- **战术灵活**：保留小比例卫星资产，适应不同市场环境

您可以根据自身风险偏好调整各类资产的比例，但建议保持多元化配置的基本原则。

## 核心投资理念

### 1. 分批建仓，降低时点风险

不同于一次性投入全部资金的"一把梭"策略，本工具采用**分批建仓**方式：
- 将总投资额分成多批次，逐周投入
- 自动计算每周的最佳投入金额
- 在市场大跌时适度加大投入力度，顺势而为

这种方法可以**显著降低择时风险**，避免在市场顶部全部投入的风险。

### 2. 目标配置，长期保持平衡

投资成功的关键是**资产配置**，而非选时选股。本工具帮助您：
- 维持预设的资产配置比例（如股债比例）
- 自动识别偏离目标的资产类别
- 生成具体的买入/卖出计划，让投资组合回归平衡

通过定期再平衡，您可以实现**低买高卖**的纪律性操作，提高长期收益。

### 3. 风险控制，守住本金

本工具内置多重风险控制机制：
- **债券地板**：确保投资组合中至少有35%的防守性资产
- **回撤保护**：当市场大幅下跌时，自动降低权益资产上限
- **波动率控制**：根据组合波动率动态调整投资强度

这些机制帮助您在追求收益的同时，**有效控制风险**，避免大幅回撤。

## 策略优势

与传统投资方法相比，本工具具有以下优势：

1. **克服人性弱点**：
   - 避免恐惧和贪婪情绪影响决策
   - 消除"追涨杀跌"的本能反应
   - 培养长期投资的纪律性

2. **降低交易成本**：
   - 只在必要时才触发交易
   - 通过"带宽"机制减少频繁小额调整
   - 智能合并交易指令，提高执行效率

3. **适应市场环境**：
   - 根据估值水平动态调整投资强度
   - 在市场极端情况下自动启动保护机制
   - 保持长期战略定力的同时进行战术调整

## 使用场景

本工具适合以下投资者：

- **定投爱好者**：希望优化定投策略，不再盲目固定金额投入
- **资产配置派**：重视资产配置，需要系统化维护目标比例
- **被动投资者**：没有时间频繁关注市场，希望有纪律地管理投资
- **长期投资者**：关注长期复利增长，不追求短期市场时机

## 快速开始

### 基本使用

1. 安装依赖：
```bash
pip install akshare pandas numpy yfinance pandas-datareader
```

2. 设置您的目标资产配置：
   - 编辑`config/custom_positions.py`填入您当前的持仓
   - 您可以使用推荐的资产配置方案，或在`rebalance_helper.py`中调整`targets`字典设置自己的目标配置

3. 运行程序获取本周交易计划：
```bash
python rebalance_helper.py
```

### 输出解读

程序会输出两套交易方案：
- **方案A**：适合股票ETF和基金混合持有的投资者
- **方案B**：适合纯基金投资者

每个方案包含：
- 本周应该买入的基金/ETF及金额
- 本周应该减持的基金/ETF及金额
- 交易前后的持仓比例对比

### 高级设置

可以通过命令行参数调整策略行为：
```bash
# 设置最小交易金额（低于此值不交易）
python rebalance_helper.py --min-trade 1000

# 设置最大单次交易占总资产比例
python rebalance_helper.py --max-trade-pct 0.08

# 设置现金储备比例
python rebalance_helper.py --cash-reserve-pct 0.05
```

## 如何调整资产配置

您可以根据自身情况调整资产配置方案：

### 风险偏好调整

- **保守型投资者**：可将防守资产（债券）比例提高到50%以上，降低权益资产比例
- **积极型投资者**：可将权益资产比例提高到70-80%，但建议保留至少20%的防守资产
- **平衡型投资者**：可使用默认配置（约65:35的股债比例）

### 生命周期调整

- **积累期**（年轻投资者）：可适当提高权益资产比例，增加长期增长潜力
- **稳定期**（中年投资者）：使用均衡配置，兼顾增长与稳定
- **分配期**（退休前后）：提高防守资产比例，降低波动风险

## 投资建议

本工具是辅助决策工具，不构成投资建议。使用时请注意：

1. **了解自己的风险承受能力**：根据自身情况设置合理的资产配置目标
2. **保持长期视角**：再平衡是长期策略，短期可能不会带来明显收益
3. **考虑交易成本**：在实际执行时需考虑手续费、税费等因素
4. **定期检视目标**：随着人生阶段变化，适时调整目标资产配置

## 注意事项

- 开放式基金和LOF使用的是"估算净值"，与收盘净值存在偏差
- 下单以当时成交价/估值为准
- 导出的CSV文件建议在表格软件中查看与执行

## 许可证

本项目采用MIT许可证，详见[LICENSE](LICENSE)文件。